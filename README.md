# 魔塔AI图像生成工具

基于魔塔（ModelScope）Qwen-Image模型的文生图工具，纯前端实现，无需后端服务器。

## 功能特性

- 🎨 使用Qwen-Image模型生成高质量图像
- ⚙️ 自定义生成参数（尺寸、步数、引导系数）
- 💾 保存和管理历史记录
- ⬇️ 一键下载生成的图像
- 🔒 安全的API密钥管理
- 📱 响应式设计，支持移动端

## 使用方法

### 1. 获取API密钥

1. 访问 [魔塔开放平台](https://modelscope.cn/)
2. 注册并登录账号
3. 在控制台创建API密钥

### 2. 运行项目

项目需要两个部分：代理服务器和前端。

#### 步骤一：启动代理服务器（必需）

由于浏览器的CORS限制，需要先启动代理服务器：

```bash
# 进入proxy目录
cd proxy

# 安装依赖（首次运行）
npm install

# 启动服务器
npm start
```

代理服务器将在 `http://localhost:3001` 启动。

#### 步骤二：启动前端服务

使用以下任一方式：

```bash
# 使用Python
python -m http.server 8000

# 使用Node.js
npx http-server

# 使用PHP
php -S localhost:8000
```

然后在浏览器中访问 `http://localhost:8000`

**重要：** 确保代理服务器（localhost:3001）在运行时，前端才能正常使用！

### 3. 使用工具

1. 在"API密钥"输入框中输入你的API密钥
2. 在"提示词"文本框中输入图像描述（例如："一只可爱的猫咪在花园里玩耍"）
3. 调整生成参数（可选）：
   - 图像宽度/高度：512/768/1024/1280
   - 生成步数：10-50（越高质量越好但速度越慢）
   - 引导系数：1-20（控制提示词影响程度）
4. 点击"生成图像"按钮
5. 等待图像生成完成

### 4. 管理结果

- 点击"下载"按钮保存图像到本地
- 点击"保存"按钮添加到历史记录
- 在历史记录中点击图像可以重新查看和下载

## 技术栈

- HTML5
- CSS3
- 原生JavaScript
- 魔塔API（Qwen-Image模型）

## 浏览器兼容性

- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

## 注意事项

1. **代理服务器**：必须先启动代理服务器（`cd proxy && npm start`），前端才能正常调用API
2. **API密钥安全**：API密钥会保存在浏览器的localStorage中，请勿在公共设备上使用
3. **速率限制**：魔塔API可能有调用频率限制，请合理使用
4. **网络连接**：需要稳定的网络连接才能正常使用
5. **端口占用**：确保3001端口（代理服务器）和前端服务端口未被占用

## 项目结构

```
PicCreateTool/
├── index.html          # 前端主页面
├── app.js             # 前端逻辑
├── config.js          # 配置文件
├── api-client.js      # API客户端
├── style.css          # 样式文件
├── proxy/             # 代理服务器
│   ├── server.js      # 服务器代码
│   ├── package.json   # 依赖配置
│   └── README.md     # 代理服务器文档
├── debug-api.html    # API诊断工具
├── test-api.html     # API测试页面
└── README.md         # 项目文档
```

## 常见问题

### Q: 生成失败，提示"CORS限制"
A: 这是因为浏览器的同源策略。请使用本地服务器运行项目，参考上面的"方法一"。

### Q: 提示"请求超时"
A: 可能是网络问题或图像生成时间过长，请检查网络连接或减少生成步数。

### Q: API密钥保存在哪里？
A: 保存在浏览器的localStorage中，清空浏览器数据会丢失。

### Q: 如何清空历史记录？
A: 点击历史记录右上角的"清空"按钮即可。

## 开发计划

- [x] 基础文生图功能
- [x] 参数配置
- [x] 历史记录管理
- [ ] 图生图功能
- [ ] 图像编辑功能
- [ ] 批量生成
- [ ] 导出为项目

## 许可证

MIT License

## 致谢

- [魔塔（ModelScope）](https://modelscope.cn/) - 提供API服务
- [Qwen-Image](https://modelscope.cn/models/Qwen/Qwen-Image) - 图像生成模型
